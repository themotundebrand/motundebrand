<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account | The Motunde Brand</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/CVKXV7R.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brandBlack: '#000000',
                        brandPink: '#F7C8D0',
                        brandGray: '#1A1A1A',
                    },
                    letterSpacing: { luxury: '0.4em' }
                }
            }
        }
    </script>
    <style>
        input, select { 
            background: transparent !important; 
            border-bottom: 1px solid rgba(247, 200, 208, 0.3) !important; 
            transition: border-color 0.3s; 
            border-radius: 0 !important;
        }
        input:focus, select:focus { border-color: #F7C8D0 !important; outline: none; }
        .form-container { display: none; }
        .form-active { display: block; animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Custom styling for the select arrow */
        select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23F7C8D0'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right center; background-size: 12px; }
    </style>
</head>
<body class="bg-brandBlack text-white min-h-screen flex flex-col font-sans">

    <nav class="p-6">
        <a href="shop.html" class="text-brandPink text-[10px] tracking-luxury uppercase">‚Üê Back to Shop</a>
    </nav>

    <main class="flex-grow flex items-center justify-center px-6 py-12">
        <div class="w-full max-w-lg bg-brandGray/50 p-8 md:p-12 rounded-sm border border-brandPink/5 backdrop-blur-md">
            
            <div class="flex justify-center space-x-8 mb-12">
                <button id="tab-login" onclick="switchTab('login')" class="text-[10px] uppercase tracking-widest text-brandPink border-b border-brandPink pb-2">Login</button>
                <button id="tab-register" onclick="switchTab('register')" class="text-[10px] uppercase tracking-widest text-brandPink/40 hover:text-brandPink pb-2 transition">Create Account</button>
            </div>

            <form id="login-form" class="form-container form-active space-y-6">
                <div>
                    <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-2">Email Address</label>
                    <input type="email" id="login-email" required class="w-full py-2 text-sm text-white">
                </div>
                <div>
                    <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-2">Password</label>
                    <input type="password" id="login-password" required class="w-full py-2 text-sm text-white">
                </div>
                <button type="submit" class="w-full bg-brandPink text-brandBlack py-4 text-[10px] font-bold uppercase tracking-[0.3em] hover:bg-white transition-all duration-500">
                    Sign In
                </button>
            </form>

            <form id="register-form" class="form-container space-y-5">
                <div>
                    <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">Full Name</label>
                    <input type="text" id="reg-name" required class="w-full py-2 text-sm text-white">
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">Phone Number</label>
                        <input type="tel" id="reg-phone" required class="w-full py-2 text-sm text-white">
                    </div>
                    <div>
                        <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">WhatsApp Number</label>
                        <input type="tel" id="reg-whatsapp" required class="w-full py-2 text-sm text-white">
                    </div>
                </div>

                <div>
                    <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">Email Address</label>
                    <input type="email" id="reg-email" required class="w-full py-2 text-sm text-white">
                </div>

                <div class="pt-4 border-t border-brandPink/10 mt-4">
                    <p class="text-[9px] uppercase tracking-luxury text-brandPink mb-4">Shipping Details</p>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">Street Address</label>
                            <input type="text" id="reg-street" placeholder="House No. and Street Name" required class="w-full py-2 text-sm text-white placeholder:text-gray-700">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">City</label>
                                <input type="text" id="reg-city" required class="w-full py-2 text-sm text-white">
                            </div>
                            <div>
                                <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">State</label>
                                <input type="text" id="reg-state" required class="w-full py-2 text-sm text-white">
                            </div>
                        </div>
                        <div>
                            <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">Country</label>
                            <input type="text" value="Nigeria" disabled class="w-full py-2 text-sm text-brandPink/40 cursor-not-allowed">
                        </div>
                    </div>
                </div>

                <div class="pt-2">
                    <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">Create Password</label>
                    <input type="password" id="reg-password" required class="w-full py-2 text-sm text-white">
                </div>

                <button type="submit" class="w-full bg-brandPink text-brandBlack py-4 mt-4 text-[10px] font-bold uppercase tracking-[0.3em] hover:bg-white transition-all duration-500">
                    Create Profile
                </button>
            </form>
        </div>
    </main>

    <script>
        function switchTab(tab) {
            const loginForm = document.getElementById('login-form');
            const regForm = document.getElementById('register-form');
            const loginBtn = document.getElementById('tab-login');
            const regBtn = document.getElementById('tab-register');

            if(tab === 'login') {
                loginForm.classList.add('form-active');
                regForm.classList.remove('form-active');
                loginBtn.className = "text-[10px] uppercase tracking-widest text-brandPink border-b border-brandPink pb-2";
                regBtn.className = "text-[10px] uppercase tracking-widest text-brandPink/40 hover:text-brandPink pb-2 transition";
            } else {
                regForm.classList.add('form-active');
                loginForm.classList.remove('form-active');
                regBtn.className = "text-[10px] uppercase tracking-widest text-brandPink border-b border-brandPink pb-2";
                loginBtn.className = "text-[10px] uppercase tracking-widest text-brandPink/40 hover:text-brandPink pb-2 transition";
            }
        }

        const API_URL = '/api';

        // Register
        document.getElementById('register-form').onsubmit = async (e) => {
            e.preventDefault();
            const userData = {
                name: document.getElementById('reg-name').value,
                email: document.getElementById('reg-email').value,
                password: document.getElementById('reg-password').value,
                phone: document.getElementById('reg-phone').value,
                whatsapp: document.getElementById('reg-whatsapp').value,
                address: {
                    street: document.getElementById('reg-street').value,
                    city: document.getElementById('reg-city').value,
                    state: document.getElementById('reg-state').value,
                    country: "Nigeria"
                }
            };

            try {
                const res = await fetch(`${API_URL}/register`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(userData)
                });
                const data = await res.json();
                if(data.token) {
                    saveSession(data.token, data.user);
                } else { alert(data.error); }
            } catch (err) { alert("Connection Error"); }
        };

        // Login
        document.getElementById('login-form').onsubmit = async (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;

            try {
                const res = await fetch(`${API_URL}/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password })
                });
                const data = await res.json();
                if(data.token) {
                    saveSession(data.token, data.user);
                } else { alert(data.error); }
            } catch (err) { alert("Connection Error"); }
        };

        function saveSession(token, user) {
            localStorage.setItem('motunde_token', token);
            localStorage.setItem('motunde_user', JSON.stringify(user));
            window.location.href = 'shop.html';
        }
    </script>
</body>
</html>