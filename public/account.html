<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account | The Motunde Brand</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/CVKXV7R.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brandBlack: '#000000',
                        brandPink: '#F7C8D0',
                        brandGray: '#1A1A1A',
                    },
                    letterSpacing: { luxury: '0.4em' }
                }
            }
        }
    </script>
    <style>
        input, select { 
            background: transparent !important; 
            border-bottom: 1px solid rgba(247, 200, 208, 0.3) !important; 
            transition: border-color 0.3s; 
            border-radius: 0 !important;
        }
        input:focus, select:focus { border-color: #F7C8D0 !important; outline: none; }
        .form-container { display: none; }
        .form-active { display: block; animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23F7C8D0'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right center; background-size: 12px; }
        
        .password-wrapper { position: relative; width: 100%; }
        .toggle-password { 
            position: absolute; 
            right: 0; 
            top: 50%; 
            transform: translateY(-50%); 
            cursor: pointer; 
            color: rgba(247, 200, 208, 0.4);
            padding: 5px;
        }
        .toggle-password:hover { color: #F7C8D0; }
    </style>
</head>
<body class="bg-brandBlack text-white min-h-screen flex flex-col font-sans">

     <a href="https://wa.me/2349025291629?text=Hi%20The%20Motunde%20Brand!%20My%20name%20is%20..." 
       target="_blank" 
       class="fixed bottom-6 right-6 z-[150] bg-[#25D366] p-3.5 rounded-full shadow-2xl transition-transform hover:scale-110 active:scale-95 whatsapp-pulse">
        <svg class="w-7 h-7 text-white" fill="currentColor" viewBox="0 0 24 24">
            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
        </svg>
    </a>
    
    <nav class="p-6">
        <a href="shop.html" class="text-brandPink text-[10px] tracking-luxury uppercase">← Back to Shop</a>
    </nav>

    <main class="flex-grow flex items-center justify-center px-6 py-12">
        <div class="w-full max-w-lg bg-brandGray/50 p-8 md:p-12 rounded-sm border border-brandPink/5 backdrop-blur-md">
            
            <div id="tab-header" class="flex justify-center space-x-8 mb-12">
                <button id="tab-login" onclick="switchTab('login')" class="text-[10px] uppercase tracking-widest text-brandPink border-b border-brandPink pb-2">Login</button>
                <button id="tab-register" onclick="switchTab('register')" class="text-[10px] uppercase tracking-widest text-brandPink/40 hover:text-brandPink pb-2 transition">Create Account</button>
            </div>

            <form id="login-form" class="form-container form-active space-y-6">
                <div>
                    <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-2">Email Address</label>
                    <input type="email" id="login-email" required class="w-full py-2 text-sm text-white">
                </div>
                <div>
                    <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-2">Password</label>
                    <div class="password-wrapper">
                        <input type="password" id="login-password" required class="w-full py-2 text-sm text-white pr-10">
                        <span class="toggle-password" onclick="togglePasswordVisibility('login-password')">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" stroke-width="1.5"/><path d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" stroke-width="1.5"/></svg>
                        </span>
                    </div>
                </div>
                <button type="submit" class="w-full bg-brandPink text-brandBlack py-4 text-[10px] font-bold uppercase tracking-[0.3em] hover:bg-white transition-all duration-500">
                    Sign In
                </button>
            </form>

            <form id="register-form" class="form-container space-y-5">
                <div>
                    <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">Full Name</label>
                    <input type="text" id="reg-name" required class="w-full py-2 text-sm text-white">
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">Phone Number</label>
                        <input type="tel" id="reg-phone" required class="w-full py-2 text-sm text-white">
                    </div>
                    <div>
                        <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">WhatsApp Number</label>
                        <input type="tel" id="reg-whatsapp" required class="w-full py-2 text-sm text-white">
                    </div>
                </div>

                <div>
                    <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">Email Address</label>
                    <input type="email" id="reg-email" required class="w-full py-2 text-sm text-white">
                </div>

                <div class="pt-4 border-t border-brandPink/10 mt-4">
                    <p class="text-[9px] uppercase tracking-luxury text-brandPink mb-4">Shipping Details</p>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">Street Address</label>
                            <input type="text" id="reg-street" placeholder="House No. and Street Name" required class="w-full py-2 text-sm text-white placeholder:text-gray-700">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">City</label>
                                <input type="text" id="reg-city" required class="w-full py-2 text-sm text-white">
                            </div>
                            <div>
                                <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">State</label>
                                <input type="text" id="reg-state" required class="w-full py-2 text-sm text-white">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="pt-2">
                    <label class="block text-[8px] uppercase tracking-widest text-brandPink/60 mb-1">Create Password</label>
                    <div class="password-wrapper">
                        <input type="password" id="reg-password" required class="w-full py-2 text-sm text-white pr-10">
                        <span class="toggle-password" onclick="togglePasswordVisibility('reg-password')">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" stroke-width="1.5"/><path d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" stroke-width="1.5"/></svg>
                        </span>
                    </div>
                </div>

                <button type="submit" class="w-full bg-brandPink text-brandBlack py-4 mt-4 text-[10px] font-bold uppercase tracking-[0.3em] hover:bg-white transition-all duration-500">
                    Create Profile
                </button>
            </form>

            <form id="verify-form" class="form-container space-y-8 text-center">
                <div>
                    <h2 class="text-brandPink text-[12px] uppercase tracking-luxury mb-2">Verify Email</h2>
                    <p class="text-[9px] text-brandPink/40 uppercase tracking-widest leading-relaxed">
                        We've sent a 6-digit code to your email.<br>Please enter it below to activate your account.
                    </p>
                </div>
                
                <div class="flex justify-center gap-2">
                    <input type="text" id="otp-code" maxlength="6" placeholder="000000" 
                           class="w-48 text-center text-2xl tracking-[0.5em] font-bold py-4 !border-b-2 !border-brandPink">
                </div>

                <button type="submit" class="w-full bg-brandPink text-brandBlack py-4 text-[10px] font-bold uppercase tracking-[0.3em] hover:bg-white transition-all duration-500">
                    Confirm Activation
                </button>
            </form>

        </div>
    </main>

    <footer class="bg-brandBlack pt-16 pb-10 px-6 md:px-12 border-t border-brandPink/5">
    <div class="max-w-7xl mx-auto mb-16">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-12">
            <div class="col-span-1">
                <h2 class="text-brandPink text-sm font-black tracking-luxury uppercase mb-6">The Motunde Brand</h2>
                <p class="text-brandPink/50 text-[10px] leading-relaxed tracking-widest uppercase max-w-xs">
                    Timeless elegance for the modern individual. Redefining fashion through quality and luxury.
                </p>
            </div>
            <div class="col-span-1 md:col-span-2 grid grid-cols-2 gap-4">
                <div>
                    <h4 class="text-brandPink text-[10px] font-bold tracking-widest uppercase mb-6">Collections</h4>
                    <ul class="text-brandPink/60 text-[9px] space-y-4 tracking-widest uppercase">
                        <li><a href="womens.html" class="hover:text-brandPink transition">Women</a></li>
                        <li><a href="mens.html" class="hover:text-brandPink transition">Men</a></li>
                        <li><a href="kids.html" class="hover:text-brandPink transition">Kids</a></li>
                        <li><a href="combo.html" class="hover:text-brandPink transition">Combo Deals</a></li>
                        <li><a href="mist.html" class="hover:text-brandPink transition">Mist</a></li>

                    </ul>
                </div>
                <div>
                    <h4 class="text-brandPink text-[10px] font-bold tracking-widest uppercase mb-6">Support</h4>
                    <ul class="text-brandPink/60 text-[9px] space-y-4 tracking-widest uppercase">
                       <li><a href="contact.html" class="hover:text-brandPink transition">Contact</a></li>
                            <li><a href="shipping.html" class="text-brandPink">Shipping</a></li>
                            <li><a href="privacy.html" class="hover:text-brandPink transition">Privacy</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-span-1">
                <h4 class="text-brandPink text-[10px] font-bold tracking-widest uppercase mb-6">Newsletter</h4>
                <div class="flex border-b border-brandPink/20 pb-2">
                    <input type="email" placeholder="YOUR EMAIL" class="bg-transparent text-[10px] text-brandPink w-full focus:outline-none placeholder:text-brandPink/20 tracking-widest">
                    <button class="text-brandPink text-[10px] font-bold ml-2">JOIN</button>
                </div>
            </div>
        </div>
    </div>
    <div class="border-t border-brandPink/10 pt-8 flex flex-col md:flex-row justify-between items-center gap-6">
        <p class="text-brandPink/30 text-[8px] tracking-[0.3em] uppercase order-2 md:order-1">
            © 2025 The Motunde Brand. All Rights Reserved.
        </p>
        <div class="flex flex-wrap justify-center gap-5 md:gap-6 order-1 md:order-2">
            <a href="#" class="text-brandPink/40 hover:text-brandPink transition uppercase text-[8px] tracking-widest">Instagram</a>
            <a href="#" class="text-brandPink/40 hover:text-brandPink transition uppercase text-[8px] tracking-widest">TikTok</a>
            <a href="#" class="text-brandPink/40 hover:text-brandPink transition uppercase text-[8px] tracking-widest">Facebook</a>
        </div>
    </div>
</footer>

  <script>
    const API_URL = '/api';
    let pendingEmail = ""; 

    // Function to toggle password visibility
    function togglePasswordVisibility(inputId) {
        const input = document.getElementById(inputId);
        if (input.type === "password") {
            input.type = "text";
        } else {
            input.type = "password";
        }
    }

    window.onload = () => {
        const token = localStorage.getItem('motunde_token');
        const user = localStorage.getItem('motunde_user');
        if (token && user) {
            window.location.href = 'membership.html';
        }
    };

    function switchTab(tab) {
        const loginForm = document.getElementById('login-form');
        const regForm = document.getElementById('register-form');
        const verifyForm = document.getElementById('verify-form');
        const loginBtn = document.getElementById('tab-login');
        const regBtn = document.getElementById('tab-register');

        verifyForm.classList.remove('form-active');

        if(tab === 'login') {
            loginForm.classList.add('form-active');
            regForm.classList.remove('form-active');
            loginBtn.className = "text-[10px] uppercase tracking-widest text-brandPink border-b border-brandPink pb-2";
            regBtn.className = "text-[10px] uppercase tracking-widest text-brandPink/40 hover:text-brandPink pb-2 transition";
        } else {
            regForm.classList.add('form-active');
            loginForm.classList.remove('form-active');
            regBtn.className = "text-[10px] uppercase tracking-widest text-brandPink border-b border-brandPink pb-2";
            loginBtn.className = "text-[10px] uppercase tracking-widest text-brandPink/40 hover:text-brandPink pb-2 transition";
        }
    }

    // 1. REGISTER LOGIC
    document.getElementById('register-form').onsubmit = async (e) => {
        e.preventDefault();
        const submitBtn = e.target.querySelector('button');
        const originalText = submitBtn.innerText;
        submitBtn.innerText = "SENDING CODE...";
        submitBtn.disabled = true;

        pendingEmail = document.getElementById('reg-email').value;
        
        const userData = {
            name: document.getElementById('reg-name').value,
            email: pendingEmail,
            password: document.getElementById('reg-password').value,
            phone: document.getElementById('reg-phone').value,
            whatsapp: document.getElementById('reg-whatsapp').value,
            address: {
                street: document.getElementById('reg-street').value,
                city: document.getElementById('reg-city').value,
                state: document.getElementById('reg-state').value,
                country: "Nigeria"
            }
        };

        try {
            const res = await fetch(`${API_URL}/register`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(userData)
            });
            const data = await res.json();
            
            if(res.ok) {
                document.getElementById('tab-header').style.display = 'none';
                document.getElementById('register-form').classList.remove('form-active');
                document.getElementById('verify-form').classList.add('form-active');
            } else {
                alert(data.error || "Registration failed");
            }
        } catch (err) { 
            alert("Connection Error"); 
        } finally { 
            submitBtn.innerText = originalText;
            submitBtn.disabled = false;
        }
    };

    // 2. VERIFY OTP LOGIC
    document.getElementById('verify-form').onsubmit = async (e) => {
        e.preventDefault();
        const otp = document.getElementById('otp-code').value;
        const submitBtn = e.target.querySelector('button');
        submitBtn.innerText = "VERIFYING...";

        try {
            const res = await fetch(`${API_URL}/verify-otp`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email: pendingEmail, otp })
            });
            const data = await res.json();
            
            if(data.token) {
                saveSession(data.token, data.user, 'shop.html');
            } else {
                alert(data.error || "Invalid Code");
            }
        } catch (err) { 
            alert("Verification Error"); 
        } finally {
            submitBtn.innerText = "Confirm Activation";
        }
    };

    // 3. LOGIN LOGIC
    document.getElementById('login-form').onsubmit = async (e) => {
        e.preventDefault();
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;

        try {
            const res = await fetch(`${API_URL}/login`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email, password })
            });
            const data = await res.json();
            if(data.token) {
                saveSession(data.token, data.user, 'shop.html');
            } else { 
                alert(data.error); 
            }
        } catch (err) { alert("Connection Error"); }
    };

    function saveSession(token, user, redirectTarget) {
        localStorage.setItem('motunde_token', token);
        localStorage.setItem('motunde_user', JSON.stringify(user));
        window.location.href = redirectTarget;
    }
</script>
</body>
</html>